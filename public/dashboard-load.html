<!DOCTYPE html>
<html>
<body>
<script>
(async () => {
    const token = localStorage.getItem('token')
    if (!token) return window.location.href = '/'

    const response = await fetch('/dashboard', {
        headers: { 'Authorization': `Bearer ${token}` }
    })

    if (!response.ok) return window.location.href = '/'

    const html = await response.text()
    document.open()
    document.write(html)
    document.close()
})();
</script>
</body>
</html>
